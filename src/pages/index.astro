---
const channelId = "UC_x5XG1OV2P6uZZ5FSM9Ttw";
const apiKey = import.meta.env.YOUTUBE_API_KEY;

const apiUrl = `https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${channelId}&key=${apiKey}`;
const res = await fetch(apiUrl);
const data = await res.json();
const channel = data.items && data.items[0];

if (!channel) {
  console.error("Channel not found or API error:", data);
}
---

<html lang="en">
  <head>
    <title>{channel ? channel.snippet.title : "YouTube Channel"}</title>
  </head>
  <body>
    <h1>{channel ? channel.snippet.title : "Channel not found"}</h1>
    {
      channel && (
        <>
          <p>Subscribers: {channel.statistics.subscriberCount}</p>
          <p>Videos: {channel.statistics.videoCount}</p>
        </>
      )
    }
    <p>API Key is {apiKey ? "Present" : "Missing"}</p>
  </body>
</html>
